동행 기능 구현